name: Claude Assistant

# This workflow allows you to interact with Claude AI from GitHub
# Simply mention @claude in any issue or PR comment to get assistance
# Example: "@claude can you review this code?" or "@claude help implement this feature"

on:
  # Triggered when comments are created on issues
  issue_comment:
    types: [created]

  # Triggered when comments are created on pull request reviews
  pull_request_review_comment:
    types: [created]

  # Optional: Triggered when issues are opened, assigned, or labeled
  issues:
    types: [opened, assigned]

  # Optional: Triggered when pull request reviews are submitted
  pull_request_review:
    types: [submitted]

jobs:
  claude-response:
    runs-on: ubuntu-latest

    # Required permissions for Claude to interact with your repository
    permissions:
      contents: write          # Allow Claude to read and write files
      issues: write            # Allow Claude to comment on issues
      pull-requests: write     # Allow Claude to comment on PRs
      id-token: write         # For OIDC authentication (if using cloud providers)

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Fetch full history for better context

      - name: Claude Code Assistant
        uses: anthropics/claude-code-action@v1
        with:
          # Your Anthropic API key (stored as a GitHub secret)
          # To set this up: Settings → Secrets and variables → Actions → New repository secret
          # Name: ANTHROPIC_API_KEY
          # Get your key from: https://console.anthropic.com
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}

          # Optional: Customize the trigger phrase (default is @claude)
          # trigger_phrase: "/claude"

          # Optional: Pass advanced arguments to Claude CLI
          # Uncomment and customize as needed:
          # claude_args: |
          #   --max-turns 10
          #   --model claude-4-0-sonnet-20250805

          # Optional: GitHub token for API access (automatically provided by GitHub)
          github_token: ${{ secrets.GITHUB_TOKEN }}
